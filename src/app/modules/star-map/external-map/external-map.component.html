<div id="external-map">
    <button mat-button (click)="showBackgroundManipulation = !showBackgroundManipulation" id="toggleManipulator"></button>
    <div class="info-div flex-items-container" *ngIf="!!hoveredSystem" [ngClass]="{'red':lockedToBackground}">
        <mat-form-field appearance="outline">
            <mat-label>System</mat-label>
            <input matInput disabled value="{{ hoveredSystem.name }}">
        </mat-form-field>

        <mat-form-field appearance="outline" class="small-field">
            <mat-label>X-Coordinate</mat-label>
            <input matInput disabled value="{{ hoveredSystem!.x }} {{ 'distance.lightyear.abbrev' | translate }}">
        </mat-form-field>

        <mat-form-field appearance="outline" class="small-field">
            <mat-label>Y-Coordinate</mat-label>
            <input matInput disabled value="{{ -hoveredSystem!.y }} {{ 'distance.lightyear.abbrev' | translate }}">
        </mat-form-field>

        <button mat-icon-button class="info-btn"
                (click)="toggleNames()"
                matTooltip="Show all system names - this will slow down the map!">
            <mat-icon>info</mat-icon>
        </button>

        <button mat-icon-button class="info-btn"
                *ngIf="showBackgroundManipulation"
                (click)="showBackgroundNav = !showBackgroundNav"
                matTooltip="Display background manipulation">
            <mat-icon>map</mat-icon>
        </button>

        <button mat-icon-button class="info-btn"
                *ngIf="showBackgroundManipulation"
                (click)="download()"
                matTooltip="Download coordinates">
            <mat-icon>file_download</mat-icon>
        </button>

        <button mat-icon-button class="info-btn"
                *ngIf="showBackgroundManipulation"
                (click)="showUpload = !showUpload"
                matTooltip="Upload coordinates">
            <mat-icon>file_upload</mat-icon>
        </button>
    </div>

    <div class="control-container flex-items-container">
        <div *ngIf="showBackgroundNav" class="map-nav">
            <app-outlined titleValue="Background controls">
                <app-outlined titleValue="Upload background">
                    <div class="upload-container">
                        <app-file-upload
                                class="file-upload"
                                (upload)="setBackground($event)"></app-file-upload>
                        <button mat-raised-button color="primary"
                                class="reset-btn"
                                [disabled]="!backgroundImage"
                                (click)="removeBackground()">
                            Remove Background
                        </button>
                        <button mat-raised-button color="primary"
                                class="reset-btn"
                                [disabled]="!backgroundImage"
                                (click)="resetBackgroundModification()">
                            Reset Background modification
                        </button>
                    </div>
                </app-outlined>

                <div class="flex-items-container">
                    <app-outlined titleValue="Move background" class="control-container-block">
                        <div class="controls">
                            <button class="kbc-button key-up"
                                    (click)="handleButtonPress('w')"
                                    [disabled]="!backgroundImage">W
                            </button>
                            <button class="kbc-button key-left" (click)="handleButtonPress('a')"
                                    [disabled]="!backgroundImage">A
                            </button>
                            <button class="kbc-button key-down" (click)="handleButtonPress('s')"
                                    [disabled]="!backgroundImage">S
                            </button>
                            <button class="kbc-button key-right" (click)="handleButtonPress('d')"
                                    [disabled]="!backgroundImage">D
                            </button>
                        </div>
                    </app-outlined>

                    <app-outlined titleValue="Stretch background" class="control-container-block">
                        <div class="controls">
                            <button class="kbc-button key-up" (click)="handleButtonPress('ArrowUp')"
                                    [disabled]="!backgroundImage">⇧
                            </button>
                            <button class="kbc-button key-left" (click)="handleButtonPress('ArrowLeft')"
                                    [disabled]="!backgroundImage">⇦
                            </button>
                            <button class="kbc-button key-down" (click)="handleButtonPress('ArrowDown')"
                                    [disabled]="!backgroundImage">⇩
                            </button>
                            <button class="kbc-button key-right" (click)="handleButtonPress('ArrowRight')"
                                    [disabled]="!backgroundImage">⇨
                            </button>
                        </div>
                    </app-outlined>

                    <app-outlined titleValue="Zoom background" class="control-container-block wider">
                        <div class="plusminus">
                            <button class="kbc-button key-down" (click)="handleButtonPress('-')"
                                    [disabled]="!backgroundImage || lockedToBackground">-
                            </button>
                            <button class="kbc-button key-up" (click)="handleButtonPress('+')"
                                    [disabled]="!backgroundImage || lockedToBackground">+
                            </button>
                        </div>
                    </app-outlined>

                    <app-outlined titleValue="Relative Locking" class="control-container-block wider">
                        <div class="locking">
                            <button class="kbc-button key-up" (click)="handleButtonPress('Escape')"
                                    [disabled]="!backgroundImage">
                                Esc
                            </button>
                        </div>
                    </app-outlined>

                    <app-outlined titleValue="Granularity control" class="wider">
                        <mat-slide-toggle [(ngModel)]="maxGranularity"
                                          (click)="setPanZoomByState()"
                                          matTooltip="Home or Pos1 Button"></mat-slide-toggle>
                    </app-outlined>
                </div>
            </app-outlined>
        </div>

        <div *ngIf="!!selectedStarSystem" class="coord-control flex-items-container">
            <app-outlined titleValue="Celestial controls" style="margin: auto;">
                <div class="celestial-controls">
                    <button mat-mini-fab color="primary" (click)="deselectSystem()"
                            matTooltip="Deselect system"
                            class="deselect-btn">
                        <mat-icon>close</mat-icon>
                    </button>
                    <button class="kbc-button key-up" (click)="handleButtonPress('i')">I</button>
                    <button class="kbc-button key-left" (click)="handleButtonPress('j')">J</button>
                    <button class="kbc-button key-down" (click)="handleButtonPress('k')">K</button>
                    <button mat-mini-fab color="primary" (click)="zoomTo()"
                            [disabled]="lockedToBackground"
                            matTooltip="Zoom to target"
                            class="zoom-btn">
                        <mat-icon>zoom_in_map</mat-icon>
                    </button>
                    <button class="kbc-button key-right" (click)="handleButtonPress('l')">L</button>
                </div>

                <mat-form-field class="name-field">
                    <input type="text" matInput [(ngModel)]="selectedStarSystem.name" (keyup)="handlePosChange('xxx')">
                </mat-form-field>

                <button mat-mini-fab color="warn" (click)="dropSystem()"
                        matTooltip="Delete system"
                        class="drop-system-btn">
                    <mat-icon>delete</mat-icon>
                </button>
            </app-outlined>
        </div>
        <div *ngIf="showUpload" class="coord-control flex-items-container">
            <app-outlined titleValue="Upload coordinates" style="margin: auto">
                <div class="upload-container">
                    <app-file-upload
                            class="file-upload"
                            (upload)="uploadCoordinates($event)"></app-file-upload>
                </div>
            </app-outlined>
        </div>
    </div>

    <div id="universe">
        <!-- svg elements will be created programmatically -->
    </div>
</div>
